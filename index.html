<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WAD-HW1</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="res/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
</head>
<body>
<header class="positionned">
    <nav>
        <div id="logo">
            <img src="res/images/logo.png" alt="Logo">
        </div>
        <div class="search-container">
            <input type="text"><button>Search</button>
        </div>
        <div id="user">
            <img src="res/images/user.png" alt="User">
        </div>
    </nav>
</header>

<div class="flex-container" id="display-data"></div>

<script>

    $.ajax({
            url : 'https://api.jsonbin.io/b/61758efcaa02be1d445e2bf6',
            type : 'get',
            beforeSend: function(xhr){xhr.setRequestHeader('secret-key', '$2b$10$0tlmvJVVNN9ImamJ8smG6OY7w.neqTJzOEJ7ZxNWth28HHLsi7tR6');},
            success: function(data) {
                var obj = JSON.parse(JSON.stringify(data));
                var count = 0;
                var tmp = '';
                while (count < Object.keys(obj.postsdata).length){
                    tmp += ' <div class="post"> <div> <div class="post-details"> <div>';
                    tmp += ' <img width="45" src="res/images/user.png" alt="">';
                    tmp += ' </div> <div class="name">'+ obj.postsdata[count]["name"] +'</div> <div class="date">'+ obj.postsdata[count]["date"]  +'</div> </div> </div>';
                    tmp += ' <div> <p> '+ obj.postsdata[count]["datatxt"]  +'</p>';
                    if (obj.postsdata[count]["media"].includes(".mp4")){
                        tmp += ' <video autoplay muted loop><source src="'+ obj.postsdata[count]["media"] +'" type="video/mp4">Your browser does not support the video tag.</video>';
                    } else if (obj.postsdata[count]["media"] != "null"){
                        tmp += ' <img class="meme" src="'+ obj.postsdata[count]["media"] +'" alt="meme"> </div> <div>';
                    } 
                    tmp += ' <button class="button"><i class="fa fa-thumbs-up"></i></button> </div> </div> </div>';

                    count += 1;
                }

                $('#display-data').prepend(tmp);
            }
        });
        
</script>